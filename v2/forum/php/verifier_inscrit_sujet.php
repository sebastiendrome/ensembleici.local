<?php/***********************************************Ce fichier permet d'abonné no_utilisateur à no_sujet ou a no_sujet,no_message lorsqu'il écrit ou répond. (S'il ne l'est pas déjà).***********/if($messagemessage==null){ //Nouveau message dans la ville.	$requete_inscrit = "SELECT * FROM message_utilisateur WHERE no_utilisateur=:nou AND no_sujet=:nos AND no_message=0";	$params = array(":nou"=>$no_utilisateur,":nos"=>$no_sujet);	$no_message_verif_inscription = $no_message_insert;		//On l'inscrit aussi au message qu'il vient de poster.	$requete_insert = "INSERT INTO message_utilisateur(no_utilisateur,no_sujet,no_message) VALUES(:nou,:nos,:nom)";	$params_insert = array(":nou"=>$no_utilisateur,":nos"=>$no_sujet,":nom"=>$no_message_insert);	$res_insert = $connexion->prepare($requete_insert);	$res_insert->execute($params_insert);	}else{ //Réponse à un message.	$requete_inscrit = "SELECT * FROM message_utilisateur WHERE no_utilisateur=:nou AND no_sujet=:nos AND no_message=:nom";	$params = array(":nou"=>$no_utilisateur,":nos"=>$no_sujet,":nom"=>$messagemessage);}$res_inscrit = $connexion->prepare($requete_inscrit);$res_inscrit->execute($params);$tab_inscrit = $res_inscrit->fetchAll();//Il n'existe pas, on l'insèreif(count($tab_inscrit)==0){	$requete_insert = "INSERT INTO message_utilisateur(no_utilisateur,no_sujet,no_message) VALUES(:nou,:nos,:nom)";	$params_insert = array(":nou"=>$no_utilisateur,":nos"=>$no_sujet,":nom"=>(($messagemessage!=null)?$messagemessage:0));	$res_insert = $connexion->prepare($requete_insert);	$res_insert->execute($params_insert);}?>